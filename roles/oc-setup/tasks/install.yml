---
- name: "oc-setup : Get oc binary and KUBECONFIG from provisioner node"
  delegate_to: "{{ groups['provisioner'][0] }}"
  fetch:
    src: "{{ item }}"
    dest: "{{ dci_cluster_configs_dir }}/"
    flat: true
  loop:
  - /usr/local/bin/oc
  - ~/clusterconfigs/auth/kubeconfig

- name: "oc-setup : Install packages needed for login"
  package:
    name: httpd-tools
    state: present
  become: true

- name: "oc-setup : Create .kube directory"
  delegate_to: "{{ groups['provisioner'][0] }}"
  file:
    path: "{{ ansible_env.HOME }}/.kube"
    state: directory
    mode: '0750'

- name: "oc-setup : Symlink kubeconfig to .kube/config"
  delegate_to: "{{ groups['provisioner'][0] }}"
  file:
    src: "../clusterconfigs/auth/kubeconfig"
    dest: "{{ ansible_env.HOME }}/.kube/config"
    state: link
...
