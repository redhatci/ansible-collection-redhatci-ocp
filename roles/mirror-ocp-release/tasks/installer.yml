---
- name: "Check if installer has been extracted"
  stat:
    path: "{{ dir }}/openshift-baremetal-install"
    get_checksum: false
  register: target
  when:
    - not force  # we don't care to stat files if we're forcing

- name: "Extract installer command from release image"
  command: >
    {{ oc_tool_path }} adm release extract
    --registry-config={{ auths_file }}
    --command=openshift-baremetal-install
    --from {{ pull_url }}
    --to "{{ dir }}"
  when:
    - force or not target.stat.exists

- name: "Make installer command readable from HTTP"
  file:
    path: "{{ dir }}/openshift-baremetal-install"
    state: file
    owner: "{{ owner }}"
    group: "{{ group }}"
    mode: "0755"
    setype: "httpd_sys_content_t"
...
