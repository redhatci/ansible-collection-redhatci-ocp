---
- name: "Create SriovNetworkNodePolicy for {{ sriov['policy'] }}"
  k8s:
    definition: "{{ lookup('template', 'sriov-policy.yaml.j2') }}"

- name: "Create SriovNetwork for {{ sriov['name'] }}"
  k8s:
    definition: "{{ lookup('template', 'sriov-network.yaml.j2') }}"
  when:
    - sriov['name'] is defined and sriov['name'] | length != 0
    - sriov['vlan'] is defined and sriov['vlan'] > 0
...
