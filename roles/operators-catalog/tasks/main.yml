---
- name: Set facts
  include_tasks: facts.yml

- name: Disable default catalog sources for disconnected deployment
  environment:
    KUBECONFIG: "{{ kubeconfig_path }}"
  shell: |
    {{ oc_tool_path }} patch OperatorHub cluster --type json -p '[{"op": "add", "path": "/spec/disableAllDefaultSources", "value": true}]'
  delegate_to: localhost

- name: Deploy Red Hat Catalog Source
  include_tasks: redhat-catalog-source.yml
...
